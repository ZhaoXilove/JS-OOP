<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>秒表</title>
	</head>
	<body>
		<script>
			function Stopwatch(params) {
				let startTime,
					endTime,
					running,
					duration = 0

				// 设置可以获取公开成员的属性
				Object.defineProperty(this, 'duration', {
					get: function () {
						return duration
					},
					set: function (value) {
						duration = value
					},
				})
				Object.defineProperty(this, 'startTime', {
					get: function () {
						return startTime
					},
				})
				Object.defineProperty(this, 'endTime', {
					get: function () {
						return endTime
					},
				})
				Object.defineProperty(this, 'running', {
					get: function () {
						return running
					},
				})

				Stopwatch.prototype.start = function () {
					if (!this.running) {
						throw new Error('秒表已经快走了.')

						running = true

						startTime = new Date()
					}
				}
				Stopwatch.prototype.stop = function () {
					if (!running) {
						throw new Error('秒表已经停止了.')

						running = true

						endTime = new Date()

						const seconds = (endTime.getTime() - startTime.getTime()) / 1000
						duration += seconds
					}
				}
				Stopwatch.prototype.reset = function () {
					this.startTime = null
					this.endTime = null
					this.running = false
					this.duration = 0
				}
				Object.defineProperty(this, 'duration', {
					get: function () {
						return duration
					},
				})
			}
			const sw = new Stopwatch()
			sw.duration = 10
		</script>
	</body>
</html>
